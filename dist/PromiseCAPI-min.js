/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){typeof define=="function"&&define.amd?define(t):e.libGlobalName=t()})(this,function(){var e,t,n;(function(r){function d(e,t){return h.call(e,t)}function v(e,t){var n,r,i,s,o,u,a,f,c,h,p=t&&t.split("/"),d=l.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(f=0;f<e.length;f+=1){h=e[f];if(h===".")e.splice(f,1),f-=1;else if(h===".."){if(f===1&&(e[2]===".."||e[0]===".."))break;f>0&&(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(f=n.length;f>0;f-=1){r=n.slice(0,f).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&&v&&v[r]&&(u=v[r],a=f)}!s&&u&&(s=u,o=a),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function m(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function g(e){return function(t){return v(t,e)}}function y(e){return function(t){a[e]=t}}function b(e){if(d(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!d(a,e)&&!d(c,e))throw new Error("No "+e);return a[e]}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice;o=function(e,t){var n,r=w(e),i=r[0];return e=r[1],i&&(i=v(i,t),n=b(i)),i?n&&n.normalize?e=n.normalize(e,g(t)):e=v(e,t):(e=v(e,t),r=w(e),i=r[0],e=r[1],i&&(n=b(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return m(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:E(e)}}},i=function(e,t,n,i){var s,l,h,p,v,g=[],w;i=i||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(v=0;v<t.length;v+=1){p=o(t[v],i),l=p.f;if(l==="require")g[v]=u.require(e);else if(l==="exports")g[v]=u.exports(e),w=!0;else if(l==="module")s=g[v]=u.module(e);else if(d(a,l)||d(f,l)||d(c,l))g[v]=b(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,m(i,!0),y(l),{}),g[v]=a[l]}}h=n.apply(a[e],g);if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!w)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){return typeof e=="string"?u[e]?u[e](t):b(o(e,t).f):(e.splice||(l=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s)},s.config=function(e){return l=e,l.deps&&s(l.deps,l.callback),s},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!d(a,e)&&!d(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("almond",function(){}),n("structures/CAPIError",[],function(){var e=function(e,t){this.name="CAPIError",this.message=e,this.additionalInfo=t};return e.prototype=new Error,e.prototype.constructor=e,e}),n("authAgents/SessionAuthAgent",["structures/CAPIError"],function(e){var t=function(e){this._CAPI=null,this._login=e.login,this._password=e.password,this.sessionName=sessionStorage.getItem("ezpRestClient.sessionName"),this.sessionId=sessionStorage.getItem("ezpRestClient.sessionId"),this.csrfToken=sessionStorage.getItem("ezpRestClient.csrfToken")};return t.prototype.ensureAuthentication=function(t){if(this.sessionId===null){var n=this,r=this._CAPI.getUserService(),i=r.newSessionCreateStruct(this._login,this._password);r.createSession("/api/ezp/v2/user/sessions",i,function(r,s){if(r){t(new e("Failed to create new session.",{sessionCreateStruct:i}),!1);return}var o=JSON.parse(s.body).Session;n.sessionName=o.name,n.sessionId=o._href,n.csrfToken=o.csrfToken,sessionStorage.setItem("ezpRestClient.sessionName",n.sessionName),sessionStorage.setItem("ezpRestClient.sessionId",n.sessionId),sessionStorage.setItem("ezpRestClient.csrfToken",n.csrfToken),t(!1,!0)})}else t(!1,!0)},t.prototype.authenticateRequest=function(e,t){e.method!=="GET"&&e.method!=="HEAD"&&e.method!=="OPTIONS"&&e.method!=="TRACE"&&(e.headers["X-CSRF-Token"]=this.csrfToken),t(!1,e)},t.prototype.logOut=function(e){var t=this._CAPI.getUserService(),n=this;t.deleteSession(this.sessionId,function(t,r){if(t){e(!0,!1);return}n.sessionName=null,n.sessionId=null,n.csrfToken=null,sessionStorage.removeItem("ezpRestClient.sessionName"),sessionStorage.removeItem("ezpRestClient.sessionId"),sessionStorage.removeItem("ezpRestClient.csrfToken"),e(!1,!0)})},t.prototype.setCAPI=function(e){this._CAPI=e},t}),n("authAgents/HttpBasicAuthAgent",[],function(){var e=function(e){this._login=e.login,this._password=e.password};return e.prototype.ensureAuthentication=function(e){e(!1,!0)},e.prototype.authenticateRequest=function(e,t){e.httpBasicAuth=!0,e.login=this._login,e.password=this._password,t(!1,e)},e.prototype.logOut=function(e){e(!1,!0)},e.prototype.setCAPI=function(e){},e}),n("structures/Response",[],function(){var e=function(e){this.body="",this.document=null;for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this.body&&(this.document=JSON.parse(this.body)),this};return e}),n("structures/Request",[],function(){var e=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this};return e}),n("ConnectionManager",["structures/Response","structures/Request","structures/CAPIError"],function(e,t,n){var r=function(e,t,n){this._endPointUrl=e,this._authenticationAgent=t,this._connectionFactory=n,this._requestsQueue=[],this._authInProgress=!1,this.logRequests=!1};return r.prototype.request=function(e,r,i,s,o){var u=this,a,f,l="GET",c="/",h="",p={};arguments.length<5&&(typeof e=="function"?(o=e,e=l,r=c,i=h,s=p):typeof r=="function"?(o=r,r=c,i=h,s=p):typeof i=="function"?(o=i,i=h,s=p):(o=s,s=p)),a=new t({method:e,url:this._endPointUrl+r,body:i,headers:s}),this._requestsQueue.push(a);if(!this._authInProgress||this._requestsQueue.length===1)this._authInProgress=!0,this._authenticationAgent.ensureAuthentication(function(e,t){if(e){u._authInProgress=!1,o(e,!1);return}u._authInProgress=!1;while(f=u._requestsQueue.shift())u._authenticationAgent.authenticateRequest(f,function(e,t){if(e){o(new n("An error occurred during request authentication.",{request:f}),!1);return}u.logRequests&&console.dir(a),u._connectionFactory.createConnection().execute(t,o)})})},r.prototype.notAuthorizedRequest=function(e,n,r,i,s){var o,u="GET",a="/",f="",l={};arguments.length<5&&(typeof e=="function"?(s=e,e=u,n=a,r=f,i=l):typeof n=="function"?(s=n,n=a,r=f,i=l):typeof r=="function"?(s=r,r=f,i=l):(s=i,i=l)),o=new t({method:e,url:this._endPointUrl+n,body:r,headers:i}),this.logRequests&&console.dir(o),this._connectionFactory.createConnection().execute(o,s)},r.prototype.delete=function(e,t){this.request("DELETE",e,"",{},t)},r.prototype.logOut=function(e){this._authenticationAgent.logOut(e)},r}),n("ConnectionFeatureFactory",[],function(){var e=function(e){this.connectionList=e,this.defaultFactory=function(e){return new e}};return e.prototype.createConnection=function(){var e=null,t=0;for(t=0;t<this.connectionList.length;++t)if(this.connectionList[t].connection.isCompatible()){this.connectionList[t].factory?e=this.connectionList[t].factory(this.connectionList[t].connection):e=this.defaultFactory(this.connectionList[t].connection);break}return e},e}),n("connections/XmlHttpRequestConnection",["structures/Response","structures/CAPIError"],function(e,t){var n=function(){this._xhr=new XMLHttpRequest,this.execute=function(n,r){var i=this._xhr,s;i.onreadystatechange=function(){if(i.readyState!=4)return;if(i.status>=400){r(new t("Connection error : "+i.status+".",{errorCode:i.status,xhr:i}),!1);return}r(!1,new e({status:i.status,headers:i.getAllResponseHeaders(),body:i.responseText}))},n.httpBasicAuth?i.open(n.method,n.url,!0,n.login,n.password):i.open(n.method,n.url,!0);for(s in n.headers)n.headers.hasOwnProperty(s)&&i.setRequestHeader(s,n.headers[s]);i.send(n.body)}};return n.isCompatible=function(){return!!window.XMLHttpRequest},n}),n("connections/MicrosoftXmlHttpRequestConnection",["structures/Response","structures/CAPIError"],function(e,t){var n=function(){this._xhr=new ActiveXObject("Microsoft.XMLHTTP"),this.execute=function(n,r){var i=this._xhr,s;i.onreadystatechange=function(){if(i.readyState!=4)return;if(i.status>=400){r(new t("Connection error : "+i.status+".",{errorCode:i.status,xhr:i}),!1);return}r(!1,new e({status:i.status,headers:i.getAllResponseHeaders(),body:i.responseText}))},n.httpBasicAuth?i.open(n.method,n.url,!0,n.login,n.password):i.open(n.method,n.url,!0);for(s in n.headers)n.headers.hasOwnProperty(s)&&i.setRequestHeader(s,n.headers[s]);i.send(n.body)}};return n.isCompatible=function(){return!!window.ActiveXObject},n}),n("services/DiscoveryService",["structures/CAPIError"],function(e){var t=function(e,t){this.connectionManager=t,this.rootPath=e,this.cacheObject={}};return t.prototype.getUrl=function(e,t){this._getObjectFromCache(e,function(e,n){if(e){t(e,!1);return}t(!1,n._href)})},t.prototype.getMediaType=function(e,t){this._getObjectFromCache(e,function(e,n){if(e){t(e,!1);return}t(!1,n["_media-type"])})},t.prototype.getInfoObject=function(e,t){this._getObjectFromCache(e,function(e,n){if(e){t(e,!1);return}t(!1,n)})},t.prototype._discoverRoot=function(e,t){if(!this.cacheObject.Root){var n=this;this.connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Root+json"},function(e,r){if(e){t(e,!1);return}n._copyToCache(r.document),t(!1,!0)})}else t(!1,!0)},t.prototype._copyToCache=function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&(this.cacheObject[t]=e[t])},t.prototype._getObjectFromCache=function(t,n){var r=null,i=this;if(!this.cacheObject.Root){this._discoverRoot(this.rootPath,function(e,r){if(e){n(e,!1);return}i._getObjectFromCache(t,n)});return}this.cacheObject.Root.hasOwnProperty(t)?r=this.cacheObject.Root[t]:this.cacheObject.hasOwnProperty(t)&&(r=this.cacheObject[t]),r?n(!1,r):n(new e("Discover service failed to find cached object with name '"+t+"'.",{name:t}),!1)},t}),n("structures/ContentCreateStruct",[],function(){var e=function(e,t,n){var r=JSON.parse(JSON.stringify(new Date));return this.body={},this.body.ContentCreate={},this.body.ContentCreate.ContentType={_href:e},this.body.ContentCreate.mainLanguageCode=n,this.body.ContentCreate.LocationCreate=t.body.LocationCreate,this.body.ContentCreate.Section=null,this.body.ContentCreate.alwaysAvailable="true",this.body.ContentCreate.remoteId=null,this.body.ContentCreate.modificationDate=r,this.body.ContentCreate.fields={},this.body.ContentCreate.fields.field=[],this.headers={Accept:"application/vnd.ez.api.Content+json","Content-Type":"application/vnd.ez.api.ContentCreate+json"},this};return e}),n("structures/ContentUpdateStruct",[],function(){var e=function(e){var t=JSON.parse(JSON.stringify(new Date));return this.body={},this.body.VersionUpdate={},this.body.VersionUpdate.modificationDate=t,this.body.VersionUpdate.initialLanguageCode=e,this.body.VersionUpdate.fields={field:[]},this.headers={Accept:"application/vnd.ez.api.Version+json","Content-Type":"application/vnd.ez.api.VersionUpdate+json"},this};return e}),n("structures/SectionInputStruct",[],function(){var e=function(e,t){return this.body={},this.body.SectionInput={},this.body.SectionInput.identifier=e,this.body.SectionInput.name=t,this.headers={},this.headers.Accept="application/vnd.ez.api.Section+json",this.headers["Content-Type"]="application/vnd.ez.api.SectionInput+json",this};return e}),n("structures/LocationCreateStruct",[],function(){var e=function(e){return this.body={},this.body.LocationCreate={},this.body.LocationCreate.ParentLocation={_href:e},this.body.LocationCreate.sortField="PATH",this.body.LocationCreate.sortOrder="ASC",this.headers={Accept:"application/vnd.ez.api.Location+json","Content-Type":"application/vnd.ez.api.LocationCreate+json"},this};return e}),n("structures/LocationUpdateStruct",[],function(){var e=function(){return this.body={},this.body.LocationUpdate={},this.body.LocationUpdate.sortField="PATH",this.body.LocationUpdate.sortOrder="ASC",this.headers={Accept:"application/vnd.ez.api.Location+json","Content-Type":"application/vnd.ez.api.LocationUpdate+json"},this};return e}),n("structures/ContentMetadataUpdateStruct",[],function(){var e=function(e){var t=JSON.parse(JSON.stringify(new Date));return this.body={},this.body.ContentUpdate={},this.body.ContentUpdate.MainLanguageCode=e,this.body.ContentUpdate.Section=null,this.body.ContentUpdate.alwaysAvailable="true",this.body.ContentUpdate.remoteId=null,this.body.ContentUpdate.modificationDate=t,this.body.ContentUpdate.publishDate=null,this.headers={Accept:"application/vnd.ez.api.ContentInfo+json","Content-Type":"application/vnd.ez.api.ContentUpdate+json"},this};return e}),n("structures/ObjectStateGroupCreateStruct",[],function(){var e=function(e,t,n){return this.body={},this.body.ObjectStateGroupCreate={},this.body.ObjectStateGroupCreate.identifier=e,this.body.ObjectStateGroupCreate.defaultLanguageCode=t,this.body.ObjectStateGroupCreate.names={},this.body.ObjectStateGroupCreate.names.value=n,this.body.ObjectStateGroupCreate.descriptions={},this.body.ObjectStateGroupCreate.descriptions.value=[],this.headers={},this.headers.Accept="application/vnd.ez.api.ObjectStateGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.ObjectStateGroupCreate+json",this};return e}),n("structures/ObjectStateGroupUpdateStruct",[],function(){var e=function(){return this.body={},this.body.ObjectStateGroupUpdate={},this.headers={},this.headers.Accept="application/vnd.ez.api.ObjectStateGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.ObjectStateGroupUpdate+json",this};return e}),n("structures/ObjectStateCreateStruct",[],function(){var e=function(e,t,n,r,i){return this.body={},this.body.ObjectStateCreate={},this.body.ObjectStateCreate.identifier=e,this.body.ObjectStateCreate.defaultLanguageCode=t,this.body.ObjectStateCreate.priority=n,this.body.ObjectStateCreate.names={},this.body.ObjectStateCreate.names.value=r,this.body.ObjectStateCreate.descriptions={},this.body.ObjectStateCreate.descriptions.value=i,this.headers={},this.headers.Accept="application/vnd.ez.api.ObjectState+json",this.headers["Content-Type"]="application/vnd.ez.api.ObjectStateCreate+json",this};return e}),n("structures/ObjectStateUpdateStruct",[],function(){var e=function(){return this.body={},this.body.ObjectStateUpdate={},this.headers={},this.headers.Accept="application/vnd.ez.api.ObjectState+json",this.headers["Content-Type"]="application/vnd.ez.api.ObjectStateUpdate+json",this};return e}),n("structures/ViewCreateStruct",[],function(){var e=function(e){return this.body={},this.body.ViewInput={},this.body.ViewInput.identifier=e,this.body.ViewInput.public=!1,this.body.ViewInput.Query={},this.body.ViewInput.Query.Criteria={},this.body.ViewInput.Query.offset=0,this.body.ViewInput.Query.FacetBuilders={},this.body.ViewInput.Query.SortClauses={},this.body.ViewInput.Query.spellcheck=!1,this.headers={Accept:"application/vnd.ez.api.View+json","Content-Type":"application/vnd.ez.api.ViewInput+json"},this};return e}),n("structures/UrlAliasCreateStruct",[],function(){var e=function(e,t,n){return this.body={},this.body.UrlAliasCreate={},this.body.UrlAliasCreate._type="RESOURCE",this.body.UrlAliasCreate.resource=t,this.body.UrlAliasCreate.path=n,this.body.UrlAliasCreate.alwaysAvailable="false",this.body.UrlAliasCreate.forward="false",this.body.UrlAliasCreate.languageCode=e,this.headers={},this.headers.Accept="application/vnd.ez.api.UrlAlias+json",this.headers["Content-Type"]="application/vnd.ez.api.UrlAliasCreate+json",this};return e}),n("structures/UrlWildcardCreateStruct",[],function(){var e=function(e,t,n){return this.body={},this.body.UrlWildcardCreate={},this.body.UrlWildcardCreate.sourceUrl=e,this.body.UrlWildcardCreate.destinationUrl=t,this.body.UrlWildcardCreate.forward=n,this.headers={},this.headers.Accept="application/vnd.ez.api.UrlWildcard+json",this.headers["Content-Type"]="application/vnd.ez.api.UrlWildcardCreate+json",this};return e}),n("structures/RelationCreateStruct",[],function(){var e=function(e){return this.body={},this.body.RelationCreate={},this.body.RelationCreate.Destination={_href:e},this.headers={},this.headers.Accept="application/vnd.ez.api.Relation+json",this.headers["Content-Type"]="application/vnd.ez.api.RelationCreate+json",this};return e}),n("services/ContentService",["structures/ContentCreateStruct","structures/ContentUpdateStruct","structures/SectionInputStruct","structures/LocationCreateStruct","structures/LocationUpdateStruct","structures/ContentMetadataUpdateStruct","structures/ObjectStateGroupCreateStruct","structures/ObjectStateGroupUpdateStruct","structures/ObjectStateCreateStruct","structures/ObjectStateUpdateStruct","structures/ViewCreateStruct","structures/UrlAliasCreateStruct","structures/UrlWildcardCreateStruct","structures/RelationCreateStruct"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=function(e,t){this._connectionManager=e,this._discoveryService=t};return d.prototype.loadRoot=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Root+json"},t)},d.prototype.newContentUpdateStruct=function(e){return new t(e)},d.prototype.newContentMetadataUpdateStruct=function(e){return new s(e)},d.prototype.newContentCreateStruct=function(t,n,r){return new e(t,n,r)},d.prototype.newSectionInputStruct=function(e,t){return new n(e,t)},d.prototype.newLocationCreateStruct=function(e){return new r(e)},d.prototype.newLocationUpdateStruct=function(){return new i},d.prototype.newViewCreateStruct=function(e){return new l(e)},d.prototype.newRelationCreateStruct=function(e){return new p(e)},d.prototype.newObjectStateGroupCreateStruct=function(e,t,n){return new o(e,t,n)},d.prototype.newObjectStateGroupUpdateStruct=function(){return new u},d.prototype.newObjectStateCreateStruct=function(e,t,n,r,i){return new a(e,t,n,r,i)},d.prototype.newObjectStateUpdateStruct=function(){return new f},d.prototype.newUrlAliasCreateStruct=function(e,t,n){return new c(e,t,n)},d.prototype.newUrlWildcardCreateStruct=function(e,t,n){return new h(e,t,n)},d.prototype.createSection=function(e,t){var n=this;this._discoveryService.getInfoObject("sections",function(r,i){if(r){t(r,!1);return}n._connectionManager.request("POST",i._href,JSON.stringify(e.body),e.headers,t)})},d.prototype.updateSection=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},d.prototype.loadSections=function(e){var t=this;this._discoveryService.getInfoObject("sections",function(n,r){if(n){e(n,!1);return}t._connectionManager.request("GET",r._href,"",{Accept:r["_media-type"]},e)})},d.prototype.loadSection=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Section+json"},t)},d.prototype.deleteSection=function(e,t){this._connectionManager.delete(e,t)},d.prototype.createContent=function(e,t){var n=this;this._discoveryService.getInfoObject("content",function(r,i){if(r){t(r,!1);return}n._connectionManager.request("POST",i._href,JSON.stringify(e.body),e.headers,t)})},d.prototype.updateContentMetadata=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},d.prototype.loadContentByRemoteId=function(e,t){var n=this;this._discoveryService.getInfoObject("content",function(r,i){if(r){t(r,!1);return}n._connectionManager.request("GET",i._href+"?remoteId="+e,"",{Accept:i["_media-type"]},t)})},d.prototype.loadContentInfo=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentInfo+json"},t)},d.prototype.loadContentInfoAndCurrentVersion=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Content+json"},t)},d.prototype.deleteContent=function(e,t){this._connectionManager.delete(e,t)},d.prototype.copyContent=function(e,t,n){this._connectionManager.request("COPY",e,"",{Destination:t},n)},d.prototype.loadCurrentVersion=function(e,t){var n=this;this.loadContentInfo(e,function(e,r){if(e){t(e,!1);return}var i=r.document.Content.CurrentVersion;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},d.prototype.loadContent=function(e,t,n,r,i){var s="",o="",u="";arguments.length<5&&(typeof t=="function"?(i=t,t=s,n=o,r=u):typeof n=="function"?(i=n,n=o,r=u):(i=r,r=u)),t&&(t="?fields="+t),n&&(n='&responseGroups="'+n+'"'),r&&(r="&languages="+r),this._connectionManager.request("GET",e+t+n+r,"",{Accept:"application/vnd.ez.api.Version+json"},i)},d.prototype.loadVersions=function(e,t){var n=this;this.loadContentInfo(e,function(e,r){if(e){t(e,!1);return}var i=r.document.Content.Versions;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},d.prototype.updateContent=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},d.prototype.createContentDraft=function(e,t,n){var r=this;this.loadContentInfo(e,function(e,i){var s="";if(e){n(e,!1);return}typeof t!="function"?s=i.document.Content.Versions._href+"/"+t:(n=t,s=i.document.Content.CurrentVersion._href),r._connectionManager.request("COPY",s,"",{Accept:"application/vnd.ez.api.Version+json"},n)})},d.prototype.deleteVersion=function(e,t){this._connectionManager.delete(e,t)},d.prototype.publishVersion=function(e,t){this._connectionManager.request("PUBLISH",e,"",{},t)},d.prototype.createLocation=function(e,t,n){var r=this;this.loadContentInfo(e,function(e,i){if(e){n(e,!1);return}var s=i.document.Content.Locations;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},d.prototype.loadLocations=function(e,t){var n=this;this.loadContentInfo(e,function(e,r){if(e){t(e,!1);return}var i=r.document.Content.Locations;n._connectionManager.request("GET",i._href,"",{Accept:"application/vnd.ez.api.LocationList+json"},t)})},d.prototype.loadLocation=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Location+json"},t)},d.prototype.loadLocationByRemoteId=function(e,t,n){this._connectionManager.request("GET",e+"?remoteId="+t,"",{Accept:"application/vnd.ez.api.Location+json"},n)},d.prototype.updateLocation=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},d.prototype.loadLocationChildren=function(e,t,n,r){var i=this,s=-1,o=0;arguments.length<4&&(typeof t=="function"?(r=t,t=s,n=o):(r=n,n=o)),this.loadLocation(e,function(e,s){if(e){r(e,!1);return}var o=s.document.Location;i._connectionManager.request("GET",o.Children._href+"?offset="+n+"&limit="+t,"",{Accept:o.Children["_media-type"]},r)})},d.prototype.copySubtree=function(e,t,n){this._connectionManager.request("COPY",e,"",{Destination:t},n)},d.prototype.moveSubtree=function(e,t,n){this._connectionManager.request("MOVE",e,"",{Destination:t},n)},d.prototype.swapLocation=function(e,t,n){this._connectionManager.request("SWAP",e,"",{Destination:t},n)},d.prototype.deleteLocation=function(e,t){this._connectionManager.delete(e,t)},d.prototype.createView=function(e,t){var n=this;this._discoveryService.getInfoObject("views",function(r,i){if(r){t(r,!1);return}n._connectionManager.request("POST",i._href,JSON.stringify(e.body),e.headers,t)})},d.prototype.loadRelations=function(e,t,n,r){var i=this,s=-1,o=0;arguments.length<4&&(typeof t=="function"?(r=t,t=s,n=o):(r=n,n=o)),this.loadContent(e,{},function(e,s){if(e){r(e,!1);return}var o=s.document.Version;i._connectionManager.request("GET",o.Relations._href+"?offset="+n+"&limit="+t,"",{Accept:o.Relations["_media-type"]},r)})},d.prototype.loadCurrentRelations=function(e,t,n,r){var i=this,s=-1,o=0;arguments.length<4&&(typeof t=="function"?(r=t,t=s,n=o):(r=n,n=o)),this.loadCurrentVersion(e,function(e,s){if(e){r(e,!1);return}var o=s.document.Version;i._connectionManager.request("GET",o.Relations._href+"?offset="+n+"&limit="+t,"",{Accept:o.Relations["_media-type"]},r)})},d.prototype.loadRelation=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Relation+json"},t)},d.prototype.addRelation=function(e,t,n){var r=this;this.loadContent(e,{},function(e,i){if(e){n(e,!1);return}var s=i.document.Version;r._connectionManager.request("POST",s.Relations._href,JSON.stringify(t.body),t.headers,n)})},d.prototype.deleteRelation=function(e,t){this._connectionManager.delete(e,t)},d.prototype.loadTrashItems=function(e,t,n){var r=this,i=-1,s=0;arguments.length<3&&(typeof e=="function"?(n=e,e=i,t=s):(n=t,t=s)),this._discoveryService.getInfoObject("trash",function(i,s){if(i){n(i,!1);return}r._connectionManager.request("GET",s._href+"?offset="+t+"&limit="+e,"",{Accept:s["_media-type"]},n)})},d.prototype.loadTrashItem=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.TrashItem+json"},t)},d.prototype.recover=function(e,t,n){var r={Accept:"application/vnd.ez.api.TrashItem+json"};typeof t!="function"?r.Destination=t:n=t,this._connectionManager.request("MOVE",e,"",r,n)},d.prototype.deleteTrashItem=function(e,t){this._connectionManager.delete(e,t)},d.prototype.emptyThrash=function(e){var t=this;this._discoveryService.getInfoObject("trash",function(n,r){if(n){e(n,!1);return}t._connectionManager.request("DELETE",r._href,"",{},e)})},d.prototype.loadObjectStateGroups=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ObjectStateGroupList+json"},t)},d.prototype.loadObjectStateGroup=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ObjectStateGroup+json"},t)},d.prototype.createObjectStateGroup=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},d.prototype.updateObjectStateGroup=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},d.prototype.deleteObjectStateGroup=function(e,t){this._connectionManager.delete(e,t)},d.prototype.createObjectState=function(e,t,n){this._connectionManager.request("POST",e+"/objectstates",JSON.stringify(t.body),t.headers,n)},d.prototype.loadObjectState=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ObjectState+json"},t)},d.prototype.updateObjectState=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},d.prototype.deleteObjectState=function(e,t){this._connectionManager.delete(e,t)},d.prototype.getContentState=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentObjectStates+json"},t)},d.prototype.setContentState=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t),{Accept:"application/vnd.ez.api.ContentObjectStates+json","Content-Type":"application/vnd.ez.api.ContentObjectStates+json"},n)},d.prototype.createUrlAlias=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},d.prototype.listGlobalAliases=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UrlAliasRefList+json"},t)},d.prototype.listLocationAliases=function(e,t,n){var r;arguments.length<3&&(n=t,t=!0),r=t===!0?"":"?custom=false",this._connectionManager.request("GET",e+"/urlaliases"+r,"",{Accept:"application/vnd.ez.api.UrlAliasRefList+json"},n)},d.prototype.loadUrlAlias=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UrlAlias+json"},t)},d.prototype.deleteUrlAlias=function(e,t){this._connectionManager.delete(e,t)},d.prototype.createUrlWildcard=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},d.prototype.loadUrlWildcards=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UrlWildcardList+json"},t)},d.prototype.loadUrlWildcard=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UrlWildcard+json"},t)},d.prototype.deleteUrlWildcard=function(e,t){this._connectionManager.delete(e,t)},d}),n("structures/ContentTypeGroupInputStruct",[],function(){var e=function(e){return this.body={},this.body.ContentTypeGroupInput={},this.body.ContentTypeGroupInput.identifier=e,this.headers={},this.headers.Accept="application/vnd.ez.api.ContentTypeGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.ContentTypeGroupInput+json",this};return e}),n("structures/ContentTypeCreateStruct",[],function(){var e=function(e,t,n){var r=JSON.parse(JSON.stringify(new Date));return this.body={},this.body.ContentTypeCreate={},this.body.ContentTypeCreate.identifier=e,this.body.ContentTypeCreate.names={},this.body.ContentTypeCreate.names.value=n,this.body.ContentTypeCreate.nameSchema="&lt;title&gt;",this.body.ContentTypeCreate.urlAliasSchema="&lt;title&gt;",this.body.ContentTypeCreate.remoteId=null,this.body.ContentTypeCreate.mainLanguageCode=t,this.body.ContentTypeCreate.isContainer="true",this.body.ContentTypeCreate.modificationDate=r,this.body.ContentTypeCreate.defalutAlwaysAvailable="true",this.body.ContentTypeCreate.defalutSortField="PATH",this.body.ContentTypeCreate.defalutSortOrder="ASC",this.body.ContentTypeCreate.FieldDefinitions={},this.body.ContentTypeCreate.FieldDefinitions.FieldDefinition=[],this.headers={},this.headers.Accept="application/vnd.ez.api.ContentType+json",this.headers["Content-Type"]="application/vnd.ez.api.ContentTypeCreate+json",this};return e}),n("structures/ContentTypeUpdateStruct",[],function(){var e=function(){return this.body={},this.body.ContentTypeUpdate={},this.headers={},this.headers.Accept="application/vnd.ez.api.ContentType+json",this.headers["Content-Type"]="application/vnd.ez.api.ContentTypeUpdate+json",this};return e}),n("structures/FieldDefinitionCreateStruct",[],function(){var e=function(e,t,n,r){return this.body={},this.body.FieldDefinitionCreate={},this.body.FieldDefinitionCreate.identifier=e,this.body.FieldDefinitionCreate.fieldType=t,this.body.FieldDefinitionCreate.fieldGroup=n,this.body.FieldDefinitionCreate.position=1,this.body.FieldDefinitionCreate.isTranslatable="true",this.body.FieldDefinitionCreate.isRequired="false",this.body.FieldDefinitionCreate.isInfoCollector="false",this.body.FieldDefinitionCreate.isSearchable="false",this.body.FieldDefinitionCreate.defaultValue="false",this.body.FieldDefinitionCreate.names={},this.body.FieldDefinitionCreate.names.value=r,this.body.FieldDefinitionCreate.descriptions={},this.body.FieldDefinitionCreate.descriptions.value=[],this.headers={},this.headers.Accept="application/vnd.ez.api.FieldDefinition+json",this.headers["Content-Type"]="application/vnd.ez.api.FieldDefinitionCreate+json",this};return e}),n("structures/FieldDefinitionUpdateStruct",[],function(){var e=function(){return this.body={},this.body.FieldDefinitionUpdate={},this.headers={},this.headers.Accept="application/vnd.ez.api.FieldDefinition+json",this.headers["Content-Type"]="application/vnd.ez.api.FieldDefinitionUpdate+json",this};return e}),n("services/ContentTypeService",["structures/ContentTypeGroupInputStruct","structures/ContentTypeCreateStruct","structures/ContentTypeUpdateStruct","structures/FieldDefinitionCreateStruct","structures/FieldDefinitionUpdateStruct"],function(e,t,n,r,i){var s=function(e,t){this._connectionManager=e,this._discoveryService=t};return s.prototype.newContentTypeGroupInputStruct=function(t){return new e(t)},s.prototype.newContentTypeCreateStruct=function(e,n,r){return new t(e,n,r)},s.prototype.newContentTypeUpdateStruct=function(){return new n},s.prototype.newFieldDefinitionCreateStruct=function(e,t,n,i){return new r(e,t,n,i)},s.prototype.newFieldDefinitionUpdateStruct=function(){return new i},s.prototype.createContentTypeGroup=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},s.prototype.loadContentTypeGroups=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentTypeGroupList+json"},t)},s.prototype.loadContentTypeGroup=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentTypeGroup+json"},t)},s.prototype.updateContentTypeGroup=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},s.prototype.deleteContentTypeGroup=function(e,t){this._connectionManager.delete(e,t)},s.prototype.loadContentTypes=function(e,t){var n=this;this.loadContentTypeGroup(e,function(e,r){if(e){t(e,!1);return}var i=r.document.ContentTypeGroup;n._connectionManager.request("GET",i.ContentTypes._href,"",{Accept:i.ContentTypes["_media-type"]},t)})},s.prototype.loadContentTypeGroupByIdentifier=function(e,t,n){this._connectionManager.request("GET",e+"?identifier="+t,"",{Accept:"application/vnd.ez.api.ContentTypeGroup+json"},n)},s.prototype.createContentType=function(e,t,n,r){var i=this;this.loadContentTypeGroup(e,function(e,s){if(e){r(e,!1);return}var o=s.document.ContentTypeGroup,u=n===!0?"?publish=true":"";i._connectionManager.request("POST",o.ContentTypes._href+u,JSON.stringify(t.body),t.headers,r)})},s.prototype.copyContentType=function(e,t){this._connectionManager.request("COPY",e,"",{},t)},s.prototype.loadContentType=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentType+json"},t)},s.prototype.loadContentTypeByIdentifier=function(e,t){var n=this;this._discoveryService.getInfoObject("contentTypes",function(r,i){if(r){t(r,!1);return}n._connectionManager.request("GET",i._href+"?identifier="+e,"",{Accept:i["_media-type"]},t)})},s.prototype.deleteContentType=function(e,t){this._connectionManager.delete(e,t)},s.prototype.loadGroupsOfContentType=function(e,t){this._connectionManager.request("GET",e+"/groups","",{Accept:"application/vnd.ez.api.ContentTypeGroupRefList+json"},t)},s.prototype.assignContentTypeGroup=function(e,t,n){this._connectionManager.request("POST",e+"/groups"+"?group="+t,"",{},n)},s.prototype.unassignContentTypeGroup=function(e,t){this._connectionManager.delete(e,t)},s.prototype.createContentTypeDraft=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},s.prototype.loadContentTypeDraft=function(e,t){this._connectionManager.request("GET",e+"/draft","",{Accept:"application/vnd.ez.api.ContentType+json"},t)},s.prototype.updateContentTypeDraftMetadata=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},s.prototype.publishContentTypeDraft=function(e,t){this._connectionManager.request("PUBLISH",e,"",{},t)},s.prototype.deleteContentTypeDraft=function(e,t){this._connectionManager.delete(e,t)},s.prototype.addFieldDefinition=function(e,t,n){var r=this;this.loadContentTypeDraft(e,function(e,i){if(e){n(e,!1);return}var s=i.document.ContentType.FieldDefinitions;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},s.prototype.loadFieldDefinition=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.FieldDefinition+json"},t)},s.prototype.updateFieldDefinition=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},s.prototype.deleteFieldDefinition=function(e,t){this._connectionManager.delete(e,t)},s}),n("structures/SessionCreateStruct",[],function(){var e=function(e,t){return this.body={},this.body.SessionInput={},this.body.SessionInput.login=e,this.body.SessionInput.password=t,this.headers={Accept:"application/vnd.ez.api.Session+json","Content-Type":"application/vnd.ez.api.SessionInput+json"},this};return e}),n("structures/UserCreateStruct",[],function(){var e=function(e,t,n,r,i){return this.body={},this.body.UserCreate={},this.body.UserCreate.mainLanguageCode=e,this.body.UserCreate.login=t,this.body.UserCreate.email=n,this.body.UserCreate.password=r,this.body.UserCreate.fields={},this.body.UserCreate.fields.field=i,this.headers={},this.headers.Accept="application/vnd.ez.api.User+json",this.headers["Content-Type"]="application/vnd.ez.api.UserCreate+json",this};return e}),n("structures/UserUpdateStruct",[],function(){var e=function(){return this.body={},this.body.UserUpdate={},this.body.UserUpdate.fields={},this.body.UserUpdate.fields.field=[],this.headers={},this.headers.Accept="application/vnd.ez.api.User+json",this.headers["Content-Type"]="application/vnd.ez.api.UserUpdate+json",this};return e}),n("structures/UserGroupCreateStruct",[],function(){var e=function(e,t){return this.body={},this.body.UserGroupCreate={},this.body.UserGroupCreate.mainLanguageCode=e,this.body.UserGroupCreate.fields={},this.body.UserGroupCreate.fields.field=t,this.headers={},this.headers.Accept="application/vnd.ez.api.UserGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.UserGroupCreate+json",this};return e}),n("structures/UserGroupUpdateStruct",[],function(){var e=function(e,t){return this.body={},this.body.UserGroupUpdate={},this.body.UserGroupUpdate.fields={},this.body.UserGroupUpdate.fields.field=[],this.headers={},this.headers.Accept="application/vnd.ez.api.UserGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.UserGroupUpdate+json",this};return e}),n("structures/PolicyCreateStruct",[],function(){var e=function(e,t,n){return this.body={},this.body.PolicyCreate={},this.body.PolicyCreate.module=e,this.body.PolicyCreate.function=t,this.body.PolicyCreate.limitations={},this.body.PolicyCreate.limitations.limitation=n,this.headers={},this.headers.Accept="application/vnd.ez.api.Policy+json",this.headers["Content-Type"]="application/vnd.ez.api.PolicyCreate+json",this};return e}),n("structures/PolicyUpdateStruct",[],function(){var e=function(e){return this.body={},this.body.PolicyUpdate={},this.body.PolicyUpdate.limitations={},this.body.PolicyUpdate.limitations.limitation=e,this.headers={},this.headers.Accept="application/vnd.ez.api.Policy+json",this.headers["Content-Type"]="application/vnd.ez.api.PolicyUpdate+json",this};return e}),n("structures/RoleInputStruct",[],function(){var e=function(e){return this.body={},this.body.RoleInput={},this.body.RoleInput.identifier=e,this.headers={},this.headers.Accept="application/vnd.ez.api.Role+json",this.headers["Content-Type"]="application/vnd.ez.api.RoleInput+json",this};return e}),n("structures/RoleAssignInputStruct",[],function(){var e=function(e,t){return this.body={},this.body.RoleAssignInput={},this.body.RoleAssignInput.Role=e,this.body.RoleAssignInput.limitation=t,this.headers={},this.headers.Accept="application/vnd.ez.api.RoleAssignmentList+json",this.headers["Content-Type"]="application/vnd.ez.api.RoleAssignInput+json",this};return e}),n("services/UserService",["structures/SessionCreateStruct","structures/UserCreateStruct","structures/UserUpdateStruct","structures/UserGroupCreateStruct","structures/UserGroupUpdateStruct","structures/PolicyCreateStruct","structures/PolicyUpdateStruct","structures/RoleInputStruct","structures/RoleAssignInputStruct"],function(e,t,n,r,i,s,o,u,a){var f=function(e,t){this._connectionManager=e,this._discoveryService=t};return f.prototype.newSessionCreateStruct=function(t,n){return new e(t,n)},f.prototype.newUserGroupCreateStruct=function(e,t){return new r(e,t)},f.prototype.newUserGroupUpdateStruct=function(){return new i},f.prototype.newUserCreateStruct=function(e,n,r,i,s){return new t(e,n,r,i,s)},f.prototype.newUserUpdateStruct=function(){return new n},f.prototype.newRoleInputStruct=function(e){return new u(e)},f.prototype.newRoleAssignInputStruct=function(e,t){return new a(e,t)},f.prototype.newPolicyCreateStruct=function(e,t,n){return new s(e,t,n)},f.prototype.newPolicyUpdateStruct=function(e){return new o(e)},f.prototype.loadRootUserGroup=function(e){var t=this;this._discoveryService.getInfoObject("rootUserGroup",function(n,r){if(n){e(n,!1);return}t._connectionManager.request("GET",r._href,"",{Accept:r["_media-type"]},e)})},f.prototype.loadUserGroup=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UserGroup+json"},t)},f.prototype.loadUserGroupByRemoteId=function(e,t,n){this._connectionManager.request("GET",e+"?remoteId="+t,"",{Accept:"application/vnd.ez.api.UserGroupList+json"},n)},f.prototype.deleteUserGroup=function(e,t){this._connectionManager.delete(e,t)},f.prototype.moveUserGroup=function(e,t,n){this._connectionManager.request("MOVE",e,"",{Destination:t},n)},f.prototype.createUserGroup=function(e,t,n){var r=this;this.loadUserGroup(e,function(e,i){if(e){n(e,!1);return}var s=i.document.UserGroup.Subgroups;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},f.prototype.updateUserGroup=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},f.prototype.loadSubUserGroups=function(e,t){var n=this;this.loadUserGroup(e,function(e,r){if(e){t(e,!1);return}var i=r.document.UserGroup.Subgroups;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},f.prototype.loadUsersOfUserGroup=function(e,t){var n=this;this.loadUserGroup(e,function(e,r){if(e){t(e,!1);return}var i=r.document.UserGroup.Users;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},f.prototype.loadUserGroupsOfUser=function(e,t){this._connectionManager.request("GET",e+"/groups","",{Accept:"application/vnd.ez.api.UserGroupRefList+json"},t)},f.prototype.createUser=function(e,t,n){var r=this;this.loadUserGroup(e,function(e,i){if(e){n(e,!1);return}var s=i.document.UserGroup.Users;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},f.prototype.getRoleAssignments=function(e,t,n){this._connectionManager.request("GET",e+"?roleId="+t,"",{Accept:"application/vnd.ez.api.UserList+json"},n)},f.prototype.loadUser=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.User+json"},t)},f.prototype.updateUser=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},f.prototype.deleteUser=function(e,t){this._connectionManager.delete(e,t)},f.prototype.assignUserToUserGroup=function(e,t,n){var r=this;this.loadUser(e,function(e,i){if(e){n(e,!1);return}var s=i.document.User.UserGroups;r._connectionManager.request("POST",s._href+"?group="+t,"",{Accept:s["_media-type"]},n)})},f.prototype.unassignUserFromUserGroup=function(e,t){this._connectionManager.delete(e,t)},f.prototype.createRole=function(e,t){var n=this;this._discoveryService.getInfoObject("roles",function(r,i){if(r){t(r,!1);return}n._connectionManager.request("POST",i._href,JSON.stringify(e.body),e.headers,t)})},f.prototype.loadRole=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Role+json"},t)},f.prototype.loadRoles=function(e,t,n,r){var i=this,s,o="",u=-1,a=0;arguments.length<4&&(typeof e=="function"?(r=e,e=o,t=u,n=a):typeof t=="function"?(r=t,t=u,n=a):(r=n,n=a)),s=e===""?"":"&identifier="+e,this._discoveryService.getInfoObject("roles",function(e,o){if(e){r(e,!1);return}i._connectionManager.request("GET",o._href+"?offset="+n+"&limit="+t+s,"",{Accept:o["_media-type"]},r)})},f.prototype.updateRole=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},f.prototype.deleteRole=function(e,t){this._connectionManager.delete(e,t)},f.prototype.getRoleAssignmentsForUser=function(e,t){var n=this;this.loadUser(e,function(e,r){if(e){t(e,!1);return}var i=r.document.User.Roles;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},f.prototype.getRoleAssignmentsForUserGroup=function(e,t){var n=this;this.loadUserGroup(e,function(e,r){if(e){t(e,!1);return}var i=r.document.UserGroup.Roles;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},f.prototype.getUserAssignmentObject=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.RoleAssignment+json"},t)},f.prototype.getUserGroupAssignmentObject=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.RoleAssignment+json"},t)},f.prototype.assignRoleToUser=function(e,t,n){var r=this;this.loadUser(e,function(e,i){if(e){n(e,!1);return}var s=i.document.User.Roles;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},f.prototype.assignRoleToUserGroup=function(e,t,n){var r=this;this.loadUserGroup(e,function(e,i){if(e){n(e,!1);return}var s=i.document.UserGroup.Roles;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},f.prototype.unassignRoleFromUser=function(e,t){this._connectionManager.delete(e,t)},f.prototype.unassignRoleFromUserGroup=function(e,t){this._connectionManager.delete(e,t)},f.prototype.addPolicy=function(e,t,n){var r=this;this.loadRole(e,function(e,i){if(e){n(e,!1);return}var s=i.document.Role.Policies;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},f.prototype.loadPolicies=function(e,t){var n=this;this.loadRole(e,function(e,r){if(e){t(e,!1);return}var i=r.document.Role.Policies;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},f.prototype.loadPolicy=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Policy+json"},t)},f.prototype.updatePolicy=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},f.prototype.deletePolicy=function(e,t){this._connectionManager.delete(e,t)},f.prototype.loadPoliciesByUserId=function(e,t,n){this._connectionManager.request("GET",e+"?userId="+t,"",{Accept:"application/vnd.ez.api.PolicyList+json"},n)},f.prototype.createSession=function(e,t,n){this._connectionManager.notAuthorizedRequest("POST",e,JSON.stringify(t.body),t.headers,n)},f.prototype.deleteSession=function(e,t){this._connectionManager.delete(e,t)},f.prototype.logOut=function(e){this._connectionManager.logOut(e)},f}),n("CAPI",["authAgents/SessionAuthAgent","authAgents/HttpBasicAuthAgent","ConnectionManager","ConnectionFeatureFactory","connections/XmlHttpRequestConnection","connections/MicrosoftXmlHttpRequestConnection","services/DiscoveryService","services/ContentService","services/ContentTypeService","services/UserService"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e,t,l){var c={logRequests:!1,rootPath:"/api/ezp/v2/",connectionStack:[{connection:i},{connection:s}]},h=c,p,d,v,m;this._contentService=null,this._contentTypeService=null,this._userService=null,t.setCAPI(this);if(typeof l=="object")for(p in l)l.hasOwnProperty(p)&&(h[p]=l[p]);d=new r(h.connectionStack),v=new n(e,t,d),v.logRequests=h.logRequests,m=new o(h.rootPath,v),this.getContentService=function(){return this._contentService||(this._contentService=new u(v,m)),this._contentService},this.getContentTypeService=function(){return this._contentTypeService||(this._contentTypeService=new a(v,m)),this._contentTypeService},this.getUserService=function(){return this._userService||(this._userService=new f(v,m)),this._userService}};return l}),n("libs/q",[],function(){return window.Q}),n("services/PromiseService",["structures/CAPIError","libs/q"],function(e,t){var n=function(n){var r;this._generatePromiseFunction=function(r){return function(){var i=Array.prototype.slice.call(arguments),s=t.defer();if(r.length-1!==arguments.length)throw new e("Wrong number of arguments provided for promise-based function.");return i.push(function(e,t){e?s.reject(e):s.resolve(t)}),r.apply(n,i),s.promise}};for(r in n)typeof n[r]=="function"&&!/^(new[^\s(]+Struct)/.test(r)&&(this[r]=this._generatePromiseFunction(n[r]))};return n}),n("PromiseCAPI",["CAPI","services/PromiseService"],function(e,t){var n=function(e){var n;this._services=[],this._getPromiseService=function(n){return function(){return this._services[n]||(this._services[n]=new t(e[n].call(e))),this._services[n]}};for(n in e)typeof e[n]=="function"&&/^(get[^\s(]+Service)/.test(n)&&(this[n]=this._getPromiseService(n))};return n}),window.eZ=window.eZ||{},window.eZ.HttpBasicAuthAgent=t("authAgents/HttpBasicAuthAgent"),window.eZ.SessionAuthAgent=t("authAgents/SessionAuthAgent"),window.eZ.CAPI=t("CAPI"),window.eZ.PromiseCAPI=t("PromiseCAPI")});